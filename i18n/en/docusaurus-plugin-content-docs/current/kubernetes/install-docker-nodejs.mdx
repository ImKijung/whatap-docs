---
id: install-docker-nodejs
title: Installing Docker Node.js
description: This step allows you to install the agent to monitor Node.js applications in the container.
tags:
  - Kubernetes
  - Kubernetes Monitoring
  - Application Installation
  - Node.js
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

This process applies the WhaTap monitoring agent to the Node.js application running on the Docker container and packages the container image.

:::note 

-   EKS Fargate is to be supported later. 

-   To help you understand the Node.js application integration process, Git example codes are provided. See [the following](https://github.com/whatap/kuber-apm-boilerplate/tree/main/nodejs/express).

:::

## Download agent

Execute the following command to install WhaTap.

```bash
npm install --save whatap
```

To update the agent, execute the following command.

```bash
npm update whatap
```

## Agent CONFIG.

Copy the _whatap.conf_ file from _node_modules/whatap_ to the root directory of your Node.js application. Modify the copied _whatap.conf_ file by referencing the following.

```ini
license=XXXXXXXXXXXXXX-XXXXXXXXXXXXXX-XXXXXXXXXXXXXX
whatap.server.host={collection server IP}
whatap_micro_enabled=true
```

## Usage

Add the following code to the first line of your application's main module.

```javascript title='Example' showLineNumbers {1}
var WhatapAgent = require('whatap').NodeAgent;

WhatapAgent.NodeAgent;
import http from 'http';
import setupApp from '../src/app';
let server = null;
const port = normalizePort(process.env.PORT || '3000');
```

To use ECMAScript (ES), add the following code.

```javascript
import WhatapAgent from 'whatap';
WhatapAgent.NodeAgent;
```

## Environment variables

```ini
env:
  - name: NODE_IP
    valueFrom: {fieldRef: {fieldPath: status.hostIP}}
  - name: NODE_NAME
    valueFrom: {fieldRef: {fieldPath: spec.nodeName}}
  - name: POD_NAME
    valueFrom: {fieldRef: {fieldPath: metadata.name}}
```

{@include: _check-install-agent.mdx}
