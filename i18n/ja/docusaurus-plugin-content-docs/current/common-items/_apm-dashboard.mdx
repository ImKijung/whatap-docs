ホーム画面 > プロジェクト選択 > <Cmdname sid="dashboard" className="uitext" /> > <Cmdname sid="application_dashboard" className="uitext" />

<ImgLang img='apm-dashboard.png' desc='アプリケーションダッシュボード'/>

<Cmdname sid="application_dashboard" className="uitext" />では、アプリケーションの主な指標をエージェントから収集し、チャートを構成することでリアルタイムでモニタリングができ、過去のデータも照会できます。なお、ダッシュボード上のウィジェットを通じてアプリケーションの問題点をを素早く特定して分析できます。

CPU、Memoryを除く一般的なチャートの場合、安定したデータは青色の系列で表現され、問題として識別される要素は赤色の系列で表示されるため、現状を簡単に認識できます。

## 過去のデータ参照

<Cmdname sid="application_dashboard" className="uitext" />は主にリアルタイムモニタリング機能を提供しますが、過去のデータも照会できます。

|                    リアルタイムモード                    |                       非リアルタイムモード                      |
| :---------------------------------------------: | :---------------------------------------------------: |
| ![リアルタイムモード](/img/apm-timeslector-realtime.png) | ![非リアルタイムモード](/img/apm-timeslector-none-realtime.png) |

1. 画面左上の時間選択から![ストップアイコン](/img/ico-pause.svg)ボタンを選択してください。

2. 日付と時間領域をクリックして、目的の時間帯を設定してください。

   <ImgLang img='apm-timeselector-setting.png' desc='手動で時刻を設定してください' />

3. <Cmdname sid="apply" className="uitext" />ボタンを選択してください。

ユーザーが設定した時間に基づいてダッシュボードに配置したウィジェットのデータを更新します。リアルタイムモードに切り替えるには![再生アイコン](/img/ico-play-time.svg)ボタンを選択してください。

## エージェントの確認

### エージェント接続状態を確認する

<ImgLang img='apm-dashboard-check-agent.png' desc='エージェント接続状態' />

画面の左上のタイムピッカーの右側には、プロジェクトに関連するエージェントの状態を確認できる情報が表示されます。これにより、アプリケーションサーバーが動作しているかどうかをすぐに確認できます。

- **_Total_**: プロジェクトに関連付けられているすべてのエージェントの数

- **_Active_**: アクティブ化されたエージェントの数

- **_Inactive_**: 非アクティブ化されたエージェントの数

- ![エージェント表示アイコン](/img/ic-inactive.svg): 非アクティブ化されたエージェントを表示または非表示にすることができます。

### エージェント別モニタリング

<ImgLang img='apm-dashboard-select-agent.png' desc='エージェントの選択' />

基本的にダッシュボードには、すべてのエージェントから収集した指標をチャートに表示しますが、エージェントごとにデータを表示することもできます。時間セレクターの下にあるエージェントを1つ以上選択してください。選択したエージェントの指標でダッシュボードに配置されたウィジェットのデータを更新します。

:::tip

エージェントを1つ以上選択した状態で再度すべてのエージェントを選択するには、選択を解除するか、**_Total_**を選択してください。

:::

:::note

プロジェクトに接続されているエージェントの数が多い場合は、エージェントの名前を短く設定することが効率的です。エージェント名設定の詳細については[次の文書](agent-name)を参照してください。

:::

### 分類別エージェントモニタリング

<ImgLang img='apm-dashboard-select-agent-by-category.png' desc='分類によるエージェントの選択' />

エージェント設定で分類されたグループ単位でエージェントを選択してモニタリングできます。

- <Cmdname sid="ITM06005" className="uitext" />: 個別エージェントを選択またはすべて選択できます。

- <Cmdname sid="ITM06006" className="uitext" />: エージェント設定で<code>whatap.okind</code>に分類されたグループ単位でエージェントをモニタリングします。

- <Cmdname sid="ITM06007" className="uitext" />: エージェント設定で<code>whatap.onode</code>に分類されたグループ単位でエージェントをモニタリングします。

- <Cmdname sid="ITM06008" className="uitext" />: エージェント設定で<code>whatap.okind</code>に分類されたエージェントの一覧のみをモニタリングします。

- <Cmdname sid="ITM06009" className="uitext" />: エージェント設定で<code>whatap.onode</code>に分類されたエージェントの一覧のみをモニタリングします。

:::note

エージェント設定の詳細については[次の文書](agent-name)を参照してください。

:::

## ダッシュボードウィジェットの編集

ダッシュボードに配置したウィジェットは、ユーザーが希望するサイズに調整でき、目的の位置に配置できます。不要と思われるウィジェットは削除して再度追加することもできます。

### ウィジェットのサイズ変更

<ImgLang img='apm-dashboard-widget-resize.png' desc='ウィジェットのサイズ変更' />

ウィジェットの右下にある![サイズ調整アイコン](/img/ic-widget-size.svg)要素を使用して、マウスでクリックした状態で目的のサイズにドラッグします。幅と高さの比率が均一な均一なグリッドが表示され、グリッド単位でウィジェットのサイズを調整できます。

### ウィジェットの移動

<ImgLang img='apm-dashboard-widget-move.png' desc='ウィジェットを移動する' />

ウィジェットの上部にカーソルを移動すると、カーソルが見えます![移動アイコン](/img/ic-move-pointer.svg) このとき、マウスの左ボタンをクリックした状態で目的の位置にドラッグしてウィジェットを移動することができます。

### ウィジェットを削除する

<ImgLang img='apm-dashboard-widget-remove.png' desc='ウィジェットを削除する' />

削除するウィジェットで右クリックします。<Cmdname sid="delete" className="uitext" />ボタンをクリックすると、ウィジェットがダッシュボードから削除されます。

### ウィジェットを追加する

<ImgLang img='apm-dashboard-widget-add.png' desc='ウィジェットを追加する' />

ダッシュボードから空きスペースにマウスカーソルを移動し、マウスの右ボタンをクリックしてください。ポップアップメニューから追加するウィジェットを選択してください。目的の場所にウィジェットを配置してサイズを変更します。

:::note

現在追加できるウィジェットは固定されていますが、今後のアップデートでウィジェットサポートを追加していく計画です。

:::

## プリセット

![プリセット](/img/apm-dashboard-preset-default.png)

ダッシュボードからユーザーが設定したウィジェットの設定とレイアウトを保存または読み込むことができます。基本プリセット(<Cmdname sid="kube_default" className="uitext" />)は変更できませんが、目的に合わせてウィジェットのサイズや配置を調整して新たにプリセットを作成できます。

### 新しいプリセットを作成する

1. ダッシュボードに必要な形式でウィジェットを配置してみてください。サイズを変更して、頻繁に確認するウィジェットのみを配置することもできます。

2. 画面の右上に![保存アイコン](/img/ic-save.svg)ボタンを選択してください。

3. 新しいプリセット名を入力してください。

   <ImgLang img='apm-dashboard-preset-save.png' desc='プリセット保存' />

   エージェント選択履歴を一緒に保存するには、<Cmdname sid="ITM07345" className="uitext" />を選択してください。

4. <Cmdname sid="save" className="uitext" />ボタンを選択してください。

プリセット一覧から新しく保存したプリセットを確認できます。

:::note

- 新しく作成したプリセットに変更が加えられた場合は、再度プリセットを保存する必要があります。![保存アイコン](/img/ic-save.svg)ボタンを選択し、同じ名前でプリセットを保存してください。既存のプリセットに変更を上書きします。

- ダッシュボードの変更を保存せずに別のメニューに移動すると、変更は保存されません。

- プリセットはユーザーアカウントに保存され、現在の他のユーザーと共有されません。より良い機能を提供するために更新されます。

:::

### プリセット削除

未使用のプリセットがある場合は、プリセット一覧から削除できます。プリセット一覧から削除しようとする項目の右側に![削除アイコン](/img/ico-remove.svg)ボタンをクリックしてください。

## ウィジェットオプションを利用する

ウィジェットの上に表示されているアイコンボタンの機能は次のとおりです。

- ![情報アイコン](/img/ic-info-circle.svg)：主要ウィジェットに関する機能と情報が確認できます。

- ![マージアイコン](/img/ico-data-merge.svg)<Cmdname sid="TLT06734" className="uitext" /> : ウィジェット項目のエージェント データを個別またはマージしてグラフで表示します。

- ![詳細アイコン](/img/ico-detail.svg)<Cmdname sid="detail" className="uitext" /> : ウィジェット項目のデータをエージェント別に区分して照会できるポップアップが表示されます。

:::note

ウィジェットによって使用可能なオプションは異なる場合があります。

:::

## ウィジェットの詳細

:::info

この文書では、<Cmdname sid="application_dashboard" className="uitext" />に配置されたウィジェットに対して説明します。<Cmdname sid="application_dashboard" className="uitext" />を使用したトランザクションおよびユーザー、サービス、リソースの分析方法に対する詳細については、次の文書をご参照ください。

- [アプリケーションダッシュボードを確認する](../best-practice-guides/about-apm-dashboard)

- [ヒットマップTX](../best-practice-guides/about-apm-hitmap-class)

- [DB接続遅延とコネクションプール](../best-practice-guides/about-apm-dbc)

:::

### エージェント関連ウィジェット

アプリケーションにインストールしたエージェントを使用して、アプリケーションの情報を確認できます。

#### <Cmdname sid="AA003" />

<ImgLang img='agent-dashboard-summary.png' desc='アプリケーション概要' />

プロジェクトに登録したアプリケーションの実行状況および個数、CPUコア数、Hosts数を表示します。

### トランザクション関連ウィジェット

トランザクションを使用して確認できるトラブルの状態は、応答時間を通じて知ることができます。 また、進行中のトランザクションが終了しない場合もトラブルとして認識する必要があります。WhaTapは、進行中の状態の時間に基づいて区間を分けて表示します。<span class='normal'>青色(Normal)</span>は応答時間が正常なトランザクション、<span class='slow'>橙色(Slow)</span>は応答時間が8秒程度の遅いトランザクション、<span class='vslow'>赤色(Very slow)</span>は、応答時間が通常の 2 倍以上に遅いトランザクションを意味します。これにより、ユーザーは直感的に素早くトラブルを認識できます。

#### <Cmdname sid="AA001" />

![アクティブトランザクションスピード](/img/speedmeter.png)

現在進行中のトランザクション(中央領域)と終了したトランザクション(右領域)の状態を確認できます。左から右に流れる水玉模様のアイコンは、トランザクションを意味します。アクティブトランザクションの状態を速度(<span class='normal'>Normal</span>、<span class='slow'>Slow</span>、<span class='vslow'>Very Slow</span>)で色分けして右上に数値として表示されます。 

#### <Cmdname sid="AA002" /> {#active-trs}

<ImgLang img='apm-dashboard-active-tx.png' desc='アクティブトランザクション' />

<Cmdname sid="AA002" className="uitext" />ウィジェットでは、進行中のトランザクションを<b>アークイコライザー</b>チャートで表現します。遅延の発生状況をエージェントごとに確認できます。エージェントの数でアークが分割されます。5秒ごとに現在サーバーで処理中のリクエストの数を表現して、そのリクエストがそれぞれどのくらいの時間で処理中なのかを把握できます。5秒間隔で検出されたリクエストは、危険かどうかを把握できるように次のように色で分類します。

- 赤色(<span class='vslow'>Very Slow</span>)：8秒以上 

- オレンジ色(<span class='slow'>Slow</span>)：3秒~8秒

- 青色(<span class='normal'>Normal</span>)： 0秒~3秒

青色が多い状況は問題ありません。これらの一部が橙色や赤色に変わるかどうか推移を見守る必要があります。トラブルが発生すると、進行中のトランザクション数が増加し、赤色の割合が高くなります。一方で、レスポンスが非常に速いシステムの場合、処理するトランザクション数(TPS)が多くても、進行中のトランザクション数は低い場合があります。

- 左上には、進行中のトランザクションが最も多いエージェント名を表示します。

- 真ん中の数字は、エージェント全体のアクティブトランザクションの合計数です。

- アクティブトランザクションを囲む2本のバーは、処理量(TPS)に基づいて3段階の速度でグラフの周りを回転します。

- 分割されたアーク領域を選択すると、エージェントで進行中のトランザクション一覧のポップアップウィンドウが表示されます。詳細なトランザクション情報を確認するには、トランザクション一覧から目的の項目を1つ選択してください。 

  <ImgLang img='apm-dashboard-active-tx-popup.png' desc='トランザクション一覧' />

  :::note

  - トランザクション一覧で選択した項目が既に終了しているトランザクションの場合は、<Cmdname sid="show_trace" className="uitext" />ボタンを選択してください。<Cmdname sid="TTL06527" className="uitext" />ウィンドウが表示されます。<Cmdname sid="TTL06527" className="uitext" />ウィンドウの詳細については<Link to="trs-profile">次の文書</Link>を参照してください。

  - トランザクションの詳細については、[次の文書](track-transactions-intro)を参照してください。

  :::

#### <Cmdname sid="AA004" /> {#active-status}

<ImgLang img='apm-dashboard-active-status.png' desc='アクティブステータス' />

プロジェクト内のすべてのエージェントは、5 秒ごとにアクティブトランザクション数を収集すると同時に進捗状況を収集します。進行状態は<Cmdname sid="active_stat_method" className="uitext" />、<Cmdname sid="sql" className="uitext" />、<Cmdname sid="active_stat_httpc" className="uitext" />、<Cmdname sid="active_stat_dbc" className="uitext" />、<Cmdname sid="active_stat_socket" className="uitext" />に分類できます。

- <Cmdname sid="active_stat_method" className="uitext" />: メソッドが実行中の状態です。一般的な状況として青色で表示されます。

- <Cmdname sid="sql" className="uitext" />: SQLが実行中の状態です。<Cmdname sid="sql" className="uitext" />数の増加が見られる場合は、データベースサーバーとの接続を確認してください。

- <Cmdname sid="active_stat_httpc" className="uitext" />: 外部APIを呼び出している状態です。<Cmdname sid="active_stat_httpc" className="uitext" /> 数が増加した場合は、外部接続されたサーバーの応答が正しく行われていないことを意味します。

- <Cmdname sid="active_stat_dbc" className="uitext" />: トランザクションがConnection Poolから新しいConnectionを獲得(get)しようとしている状態です。DB Connection Poolの数が不足すると、新しい接続リクエストが発生するたびに遅延が発生し、性能トラブルの原因となります。この場合、<Cmdname sid="active_stat_dbc" className="uitext" />の数値が増加します。

  :::note

  DB接続遅延に関する詳細については[次の文書](../best-practice-guides/about-apm-dbc)を参照してください。

  :::

- <Cmdname sid="active_stat_socket" className="uitext" />: 外部システムとのTCP接続の試行を意味します。<Cmdname sid="active_stat_socket" className="uitext" /> 数値が持続的に増加する場合は、外部システムとの接続がないために、障害が発生している可能性があります。

#### <Cmdname sid="AA005" />

<ImgLang img='hitmap.png' desc='ヒットマップ' />

<Cmdname sid="AA005" className="uitext" />チャートは、終了したトランザクション応答時間を分布図で表現します。横軸はトランザクション終了時間です。縦軸は実行時間です。実行時間の長いトランザクションは、分布図の上部に位置します。<Cmdname sid="AA005" className="uitext" />内のチャート領域をドラッグすると、詳細なトランザクション情報が確認できる<Cmdname sid="TTL06209" className="uitext" />ウィンドウが表示されます。<Cmdname sid="TTL06209" className="uitext" />の詳細については <Link to="dashboard-hitmap-trace">次の文書</Link>を参照してください。

- 通常のトランザクションは水色→青色→紺色の順に表現されます。

- エラートランザクションは黄色→橙色→赤色の順に表現されます。

- 画面の右上の数字はチャート内の<span class='normal'>トランザクション数と</span>/<span class='slow'>エラー数</span>を意味します。

- <Cmdname sid="yaxis" className="uitext" />ボタンをタップすると、実行時間を示すY軸を自動調整します。

- <Cmdname sid="err" className="uitext" />ボタンを選択すると、エラートランザクションのみ表示します。

- ![上向きアイコン](/img/up-arrow.svg)または![下向きアイコン](/img/down-arrow.svg)ボタンを選択すると、5秒~80秒でチャートを拡大／縮小することができます。

:::note

- エラーが発生せず、実行時間が500ms以下のトランザクションの詳細は、URLあたり5分に1回のみ収集されます。

- TPSや平均応答時間などの統計情報には影響しません。

- エージェント設定により、ポリシーを設定できます。詳しい内容は[次の文書](agent-transaction)を参照してください。

- ヒットマップウィジェットを使用してトランザクションを分析するプロセスについては、次の文書を参照してください。

:::

### サービス関連ウィジェット

サービス関連ウィジェットは、アプリケーションのパフォーマンスチューニングの指標として使用できます。

#### <Cmdname sid="apdex" />

![Apdex](/img/apm-dashboard-apdex.png)

{@include: ../common-items/_java-apdex-desc.mdx} 

:::note

満足したSのデフォルト値は、<Cmdname sid="management" className="uitext" /> > <Cmdname sid="agent_configuration" className="uitext" />メニューから変更できます。 設定キーの値は、`apdex_time`です。 エージェントバージョン2.0以降からサポートします。

:::

#### <Cmdname sid="tps" />

![TPS](/img/apm-dashboard-tps.png)

**Tansaction Per Second**(**TPS**)は毎秒処理されるトランザクション数を意味し、サービスパフォーマンス指標の基準となります。5 秒ごとに処理されるトランザクションの数を 1 秒あたりの件数に変換してチャートで表現します。直前10分間のTPSを表示します。

:::note

TPS、応答時間、CPU 使用率分析の詳細については[次の文書](../best-practice-guides/about-apm-dashboard#analysis-user-service-resource)を参照してください。

:::

#### <Cmdname sid="avg_restime" />

<ImgLang img='apm-dashboard-avg-response-time.png' desc='平均応答時間'/>

アプリケーションサーバーがユーザーにリクエスト結果を返すのに掛かる時間をリアルタイムでモニタリングします。<Cmdname sid="avg_restime" className="uitext" />は、チューニング指標として意味があります。WhaTapのモニタリングサービスは、5秒間隔でトランザクションの平均応答時間を計算します。

:::note

TPS、応答時間、CPU 使用率分析の詳細については[次の文書](../best-practice-guides/about-apm-dashboard#analysis-user-service-resource)を参照してください。

:::

### リソース関連ウィジェット

#### <Cmdname sid="system_cpu" />

<ImgLang img='apm-dashboard-cpu.png' desc='システムCPU' />

アプリケーションサーバーのCPU使用量です。リアルタイムでCPU使用量の変化の推移を認することができます。

:::note

TPS、応答時間、CPU 使用率分析の詳細については[次の文書](../best-practice-guides/about-apm-dashboard#analysis-user-service-resource)を参照してください。

:::

#### <Cmdname sid="AA010" /> {#heap-memory}

<ImgLang img='apm-dashboard-heap-memory.png' desc='ヒープメモリ' />

各サーバーごとに使用可能な最大メモリと現在のメモリを表示して、危険な数値にあるサーバーを確認できます。時間の経過に伴うメモリ使用量の変化をリアルタイムで確認できます。

メモリ折れ線チャートは通常、波線を続けます。アプリケーションサーバーがリクエストを処理するためにメモリを使用するとメモリ折れ線チャートは増加します。GC(Garbage Collection)によってメモリをクリーンアップすると減少します。<Cmdname sid="AA010" className="uitext" />指標は平均値を使用して表示します。

:::note

- JavaとNode.jsは、ヒープメモリの合計量と使用量を意味します。

- PHPおよびPython, .Netはプロセスのメモリの使用量を意味します。

:::

:::tip

ヒープメモリチャート分析に関しての詳細については、次のリンクを参照してください。

- [月間WhaTap：モニタリングで注目すべき指標](https://www.whatap.io/ko/blog/94/)

- [Javaヒープメモリーチャートの分析：Ch.1ヒープチャート観察](https://youtu.be/FcWfVrETWh4)

- [JAVAヒープメモリーチャートの分析：Ch.2 メモリリークとヒープダンプ分析](https://youtu.be/t2q5z4HHNfs)

:::

### ユーザー関連ウィジェット

#### <Cmdname sid="realtime_user" />

<ImgLang img='apm-dashboard-realtime-user.png' desc='同時接続ユーザー' />

リアルタイムブラウザのユーザー数が表示されます。5秒ごとに、過去5分以内にトランザクションを行ったユーザーを重複なくカウントされ、表示します。ユーザーのブラウザのIPに基づいてカウントします。

:::note

<InDoc product='java'>

- エージェント設定では、ユーザー識別のためにIPを使用または、クッキーを使用します。 詳しい内容は[次の文書](agent-additional-option)を参照してください。

</InDoc>

- 通常、接続ユーザーはネットワークに接続しているユーザーを意味します。ただし、ウェブシステムは未接続のネットワークを使用するため異なります。接続されているという意味するのではなく、最新のリクエストを送信したユーザーが測定の対象である可能性があります。

- リアルタイム(同時接続) ユーザーとは、同じ時間帯にシステムを使用しているユーザーを意味します。リアルタイム(同時接続) ユーザーを計算または測定する方式は多数あります。

- ユーザー数は、単に合計されるのではなく、** HyperLogLog**によって計算されます。** HyperLogLog**は、非常に少ないメモリ内の要素の数を推定する確率的なデータ構造を意味します。

:::

### 1日基準比較ウィジェット

#### <Cmdname sid="today_tps" />

<ImgLang img='apm-dashboard-today-tps.png' desc='本日TPS' />

1日のTPSを時間帯別に表示します。昨日の同時間帯のTPS(グレー)と比較して確認できます。![right-arrow](/img/right-arrow.svg)ボタンをクリックすると、<Cmdname sid="reportStat" className="uitext" /> > <Cmdname sid="daily_app_stat" className="uitext" />メニューに移動します。

#### <Cmdname sid="daily_visit" />

<ImgLang img='apm-dashboard-today-users.png' desc='本日ユーザー' />

一日あたりの<Cmdname sid="realtime_user" className="uitext" />の数を時間帯別に表した指標です。昨日の同時ユーザー数(グレー)と比較して確認できます。![right-arrow](/img/right-arrow.svg)ボタンをクリックすると、<Cmdname sid="reportStat" className="uitext" /> > <Cmdname sid="daily_app_stat" className="uitext" />メニューに移動します。

## リアルタイム通知の確認

画面の右上に![リアルタイム通知icon](/img/ico-noti.svg)**リアルタイム通知**ボタンをクリックすると、最近発生したイベントが確認できます。トグルメニューをクリックして、ブラウザ通知をオンまたはオフにすることができます。

:::note

画面上部の固定メニュー領域の基本要素についての詳細は[次の文書](../main-ui-intro-v2)を参照してください。

:::
