## Background Threadのアクティブスタック

{/* @since v1.6.2 */}
基本的に**アクティブスタック**は、トランザクションが実行されているスレッドのスタックを意味します。ただし、一部のバックグラウンドスレッドのスタックも分析が必要な場合があります。この場合、オプションを通じてバックグラウンドスレッドに対する**アクティブスタック**が取得できます。この機能はJavaエージェント1.6.2バージョン以降からサポートします。

- `async_stack_enabled`の値を`true`に設定すると活性化されます。

  ```ini title="whatap.conf"
  async_stack_enabled=false
  ```

- スタックダンプの間隔は、フォアグラウンドアクティブスタックの設定に準じます。

  ```ini title="whatap.conf"
  active_stack_second=10
  ```

- 対象スレッド名を指定する場合は、`*`を使用して文字列パターンを指定します。 

  ```ini title="whatap.conf"
  async_thread_match=http*,abc*
  ```

    スレッド名でスタックダンプの対象を識別します。コンマ(,)を区切り文字として使用してmatchを複数指定できます。

- スタックの上位メソッドが`async_thread_parking`に登録されたクラスまたはメソッドの場合、スレッドがパーキング状態にあると判断してダンプを生成しません。

  ```ini title="whatap.conf"
  async_thread_parking_class=sun.misc.Unsafe
  async_thread_parking_method=park
  ```
