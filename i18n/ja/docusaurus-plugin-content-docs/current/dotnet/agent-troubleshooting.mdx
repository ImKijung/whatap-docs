---
id: agent-troubleshooting
title: インストール問題の解決
description: .NETエージェントのインストール時、発生する可能性のある問題を確認することができます。
tags:
  - .NET
  - 問題解決
  - Troubleshooting
---

.NETエージェントのインストール後、予期しない問題が発生した場合は、次の事項を確認して迅速に問題を解決してください。引き続き同じ問題が発生する場合は、[support@whatap.io](mailto:support@whatap.io)まで問い合わせてください。またはサービス画面の右上の![カスタマーサポートアイコン](/img/ico-help.svg)ボタンを選択すると表示されるチャットウィンドウを通じて追加のサポートを受けることもできます。

:::note

メールまたはチャットウィンドウで問い合わせる時に、エージェントのログファイルが必要になる場合があります。 エージェントのログファイルは、次のパスにあります。

- `C:\Program Files\WhaTap .NET\logs`
- `C:\ProgramData\WhaTap` (このパスがない場合、無視しても構いません。)

:::

## すべてのデータが収集されない場合

<ImgLang img='dotnet-apm-troubleshooting-connection-fail.png' desc='' />

すべてのウィジェットにデータが収集されない場合は、次の事項を確認してください。

- エージェント設定のための_whatap.conf_ファイルにプロジェクト**アクセスキー**と**収集サーバー情報**が正しく入力されているか確認してください。

- 当該サーバーのファイアウォール設定を確認してください。アウトバウンド接続のために6600番ポートが開放されている必要があります。

## ヒートマップ情報が収集されない場合

<ImgLang img='dotnet-apm-troubleshooting-none-hitmap.png' desc='' />

ユーザーのアプリケーションの対応環境を確認してください。NETアプリケーションモニタリングのための対応環境は[次の文書](supported-spec)を参考にしてください。サーバーのドットネットバージョンが対応環境に該当しても、アプリケーションのバージョンが.NET Framework 4.5以降でないと、モニタリングのためのデータ収集がスムーズでない可能性があります。

## 対応範囲の確認が困難な場合や、対応対象として判別された場合

対象アプリケーションの_web.config_ファイルを[support@whatap.io](mailto:support@whatap.io)に伝えて問い合わせてください。可能であれば、対象アプリケーションのプロジェクトファイル(_.csproj_)を伝えることを推奨します。

## システム環境変数の確認

`sysdm.cpl`コマンドを実行して**_システム属性_**ウィンドウを開きます。**_詳細設定_** > **_環境変数_**をクリックして、システム環境変数が正しく登録されているか確認してください。

![ウィンドウシステム環境変数](https://img.whatap.io/media/agent_dotnet/install/system_properties.png)

システム環境変数は、エージェントのインストール時に自動登録されます。次のコンテンツが登録されていることを確認してください。

- **COR_ENABLE_PROFILING = 1**

  CLRプロファイラーを有効にします。

- **COR_PROFILER = {D76F1D76-A9E0-4C87-874F-C0AD93D4229B}**

  WhaTap CLRプロファイラーをAPIに登録する場合に使用するGUIDで、固定値です。

- **COR_PROFILER_PATH = C:\\Program Files\\WhaTap .NET\\WhaTap.ClrProfiler.dll**

  WhaTap CLRプロファイラーDLLのパスです。

- **WHATAP_APP_TYPE = 7**

  WhaTapサーバーと通信するエージェントの種類と固定値です。

- **WHATAP_DOTNET_HOME = C:\\Program Files\\WhaTap .NET**

  WhaTapプログラムのホームパスを指定します。

- **WHATAP_DOTNET_TRACE = 1**

  モニタリングデータ収集機能を有効にします。
