---
id: container-map-call-information
title: Call Information
description: コンテナ上で実行中のアプリケーションの呼び出し流れと外部呼び出し対象の状態を確認できます。
tags:
  - Kubernetes
  - Kubernetesモニタリング
  - 呼び出し情報
---

:::note 

**_外部呼び出し状態_**照会機能は、アプリケーションがJavaの場合のみ提供します。

:::

ホーム画面>プロジェクト選択>**_ダッシュボード_**>**_コンテナマップ_**>対象選択後**詳細を見る**画面に進入>**_呼び出し情報_**タブの選択

クバネティスコンテナ上で実行中のアプリケーションの呼び出しフローと外部呼び出し対象の状態を確認できます。 WhaTapクバネティスモニタリングで提供する呼び出し情報は以下の通りです。 

-   **_App呼び出しフロー図_**

-   **_外部コールステータス_**

## App呼び出しフロー図{#app-call-flow}

<ImgLang img='k8s-container-map-call-info-app.png' desc='App呼び出しフロー図' />

Pod内部で実行中のコンテナアプリケーションの呼び出しフローを表現したチャートを提供します。 ユーザー指定グループ(Okind)、Pod、DB接続(DBC)および外部呼び出し(HTTPC)の3つのノード間の接続関係を確認することができます。 各ノードは、以下の情報を提供します。 

#### ![指示線1](/img/number-01.png)ユーザー指定グループ(okind)

ユーザーが指定したグループ名を意味します。 グループ(okind)を指定していない場合、そのノードは表示されません。

#### ![指示線2](/img/number-02.png)Pod

コンテナアプリケーションが属しているPod名称を意味します。 コンテナアプリケーション内のアクティブトランザクションの合計数と処理速度を確認できます。 選択時、**_アクティブトランザクション_**メニューに移動します。

-   **_Active Tx_**: コンテナアプリケーション内のアクティブトランザクションを意味します。 

    -   **_Total_**: コンテナアプリケーション内のアクティブトランザクションの総数を意味します。

    -   <span class='normal'>Normal</span>: 0\~3秒内に処理されるトランザクションの数を意味します。

    -   <span class='slow'>Slow</span>: 3\~8秒内に処理されるトランザクションの数を意味します。

    -   <span class='vslow'>Very Slow</span>: 処理に8秒以上かかるトランザクションの数を意味します。

-   **_Application_**: Pod内部のApplication名称を意味します。 

-   **_Node_**: Podが属するノード名称を意味します。 

-   **_Namespace_**: Podが属するNamespaceの名称を意味します。 

-   **_ReplicaSet_**: Podが属するReplicaSetの名称を意味します。 

-   **_Deployment_**: Podが属するDeploymentの名称を意味します。  

#### ![指示線3](/img/number-03.png)DB接続および外部呼び出し

-   **_DB接続(dbc)_**: Pod内部のコンテナアプリケーションが呼び出したDB Connectionを意味します。 選択時、**_外部呼び出しの状態_**照会タブに移動します。

    -   **_Active Tx_**: DB Connection中のコンテナアプリケーション内のアクティブトランザクションを意味します。 

    -   **_Total_**: コンテナアプリケーション内のアクティブトランザクションの総数を意味します。

    -   <span class='normal'>Normal</span>: 0\~3秒内に処理されるトランザクションの数を意味します。

    -   <span class='slow'>Slow</span>: 3\~8秒内に処理されるトランザクションの数を意味します。

    -   <span class='vslow'>Very Slow</span>: 処理に8秒以上かかるトランザクションの数を意味します。

-   **_外部呼び出し(httpc)_**: Pod内部のコンテナアプリケーションが呼び出した外部APIを意味します。 選択時、**_外部呼び出しの状態_**照会タブに移動します。 

    -   **_Active Tx_**: 外部API呼び出し中のコンテナアプリケーション内のアクティブトランザクションを意味します。 

    -   **_Total_**: コンテナアプリケーション内のアクティブトランザクションの総数を意味します。

    -   <span class='normal'>Normal</span>: 0\~3秒内に処理されるトランザクションの数を意味します。

    -   <span class='slow'>Slow</span>: 3\~8秒内に処理されるトランザクションの数を意味します。

    -   <span class='vslow'>Very Slow</span>: 処理に8秒以上かかるトランザクションの数を意味します。

## 外部コールステータス{#remote-access-status}

外部呼び出しログを利用してモニタリング対象が呼び出す目的地の接続状態情報に基づいて、外部呼び出し対象が正常かどうかの情報を提供します。 **_外部呼び出し状態_**照会機能を通じて、接続不可対象の可視性を提供します。 これにより、サービストラブル発生時の問題発生地点を簡単に把握できます。 また、持続的な接続失敗によるスレッドやコネクションの増加などのリソース超過現象を事前に感知し、これに対応することができます。

:::note

**外部呼出しログ**

アプリケーションエージェント設定により、各モニタリング対象別の外部呼び出しの成功および失敗を記録したログです。 

-   外部呼び出しタイプは次のとおりです。

    `httpcall`、`db`、`socket` 

-   外部呼び出しログを収集するには、**_エージェント設定_**に次のオプションを追加する必要があります。

    ```ini
    logsink_rt_enabled=true
    logsink_enabled=true
    ```

::: 

<ImgLang img='k8s-container-map-call-info-remote.png' desc='外部コールログ' />

**_外部呼び出し状態_**タブで外部呼び出しログを一覧形式で照会することができます。 最近24時間範囲のログを最大500個読み込んで表示します。 リアルタイムで照会すると、データは3秒間隔で更新されます。 

#### ![指示線1](/img/number-01.png)上段バーオプション

-   **_エージェント_**または**_業務_**カラムの表示有無を選択できます。

-   検索ワード入力ウィンドウを介して、該当検索ワードが属するエージェント、業務、ログを含む列をフィルタリングできます。

-   ![再生アイコン](/img/ic-caret-right.svg)**_再生_**: ログがアップデートされたときに最下段に移動し、直近のログを確認できます。

-   ![一時停止アイコン](/img/ico-pause.svg)**_一時停止_**: 自動スクロール移動を一時的に停止します。

-   ![上段アイコン](/img/ic-caret-up.svg)![下段アイコン](/img/ic-caret-down.svg): 最上段または最下段に移動します。

#### ![指示線2](/img/number-02.png)外部呼び出しログ一覧

アイコンとタグにより、外部呼び出しログの主な内容を簡単に確認できます。 エラーログの場合<span class='vslow'>赤色</span>と表示されます。

-   外部呼び出しタイプはアイコン![dbcアイコン](/img/ic-db.svg)(**_db_**)、![httpcアイコン](/img/ic-network-filled.svg)(**_httpcall_**)、![socketアイコン](/img/ic-branches.svg)(**_socket_**)を通じてご案内します。

-   `target`: 外部呼び出しおよび接続対象を意味します。 

-   `content`: ログの内容を意味します。 

-   `exception`: エラー発生時に記録されたログの内容を意味します。

#### ![指示線3](/img/number-03.png)最後の呼び出し状態

照会されたすべてのログの外部呼び出し対象一覧を確認します。 直近の接続状態によって<span class='vslow'>成功</span>または<span class='mstop'>失敗</span>と表示されます。 

-   照会モード

    -   **_List_**: 基本の一覧ビューです。 一覧全体の長さが画面の高さを超える場合、スクロールが発生します。

    -   **_Map_**: 一覧が画面を超えると、一覧の長さを短くして横方向に外部呼び出し対象を羅列します。

-   フィルター

    外部呼び出し対象を選択すると、その外部呼び出し対象のログだけをフィルタリングし、外部呼び出しログ一覧を照会することができます。 再選択時に解除されます。

:::note

**データがない場合**

リアルタイム照会時に、最近24時間の間に外部呼び出しログが収集されたことを確認します。 24時間外部呼び出しログが収集されていない場合は、次のような案内メッセージを提供します。

<ImgLang img='k8s-container-map-call-info-remote-none.png' desc='데이터 미수집' />

:::

<!-- 

* ![일시 정지 아이콘](/img/ic-s-pause.svg) 일시 정지

-->
