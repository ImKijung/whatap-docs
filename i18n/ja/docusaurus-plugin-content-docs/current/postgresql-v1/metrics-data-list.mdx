---
id: metrics-data-list
title: PostgreSQLメトリクス
description: PostgreSQLデータベースのメトリクスについて説明します。
tags:
  - PostgreSQL
  - メトリクス
  - データベース
  - データベースモニタリング
---

データベースメトリクスは、データベースの作業量とリソース使用量を包括的に収集します。 WhaTapモニタリングサービスは、継続的にメトリクスを収集してデータベースのボトルネックを特定し、性能問題の根本原因を特定するのに役立つデータを提供します。

その他のメトリクスに関する詳細については、[次のリンク](https://www.postgresql.org/docs)を参照してください。

<div class='db-metric'>

| Metric                   | Description                                                                                              |
| ------------------------ | -------------------------------------------------------------------------------------------------------- |
| `active_sessions`        | クエリが実行されているセッション数                                                                                        |
| `blk_read_time`          | データベースのバックエンドからデータファイルのブロックを読み取るのにかかる時間(milliseconds)、`track_io_timing`が有効な場合、それ以外の場合は `0`               |
| `blk_write_tiem`         | データベースのバックエンドからデータファイルのブロックを読み取るのにかかった時間(milliseconds), `track_io_timing`が有効な場合、それ以外の場合は `0`             |
| `blks_hit`               | ディスクブロックがバッファキャッシュで既に発見され、読み込みを必要としない回数(オペレーティングシステムのファイルシステムキャッシュではなく、PostgreSQLバッファキャッシュからのヒットのみ含む)    |
| `blks_hit_ratio`         | バッファキャッシュヒット率<br/>sum(`blks_hit`)\*100/sum(`blks_hit` + `blks_read`)                                     |
| `blks_read`              | そのデータベースで読み込んだディスクブロックの数                                                                                 |
| `buffers_checkpoint`     | チェックポイント(`check_point`) 間に記録されたバッファ数                                                                     |
| `check_point`            | `check_point`は、すべてのデータファイルがシーケンシャルなトランザクションログが特定の時点にすべてのデータファイルが物理的に書き込まれる時点を意味します。 `check_point`が発生した回数 |
| `checkpoints_write_time` | ファイルがディスクに書き込まれるチェックポイント処理にかかった合計時間(milliseconds)                                                        |
| `checkpoints_tiemed`     | 予約されて実行されたチェックポイント数                                                                                      |
| `commit_count`           | コミットされたトランザクションの数                                                                                        |
| `conflicts`              | そのデータベースで復旧中にクラッシュしたためにキャンセルされたクエリ数                                                                      |
| `connect_error`          | サーバー接続エラーの回数                                                                                             |
| `deadlock_count`         | そのデータベースで検知されたデッドロック(deadlock) 数                                                                         |
| `dml_count`              | DML(Data Manipulation Language) 文法(statement) が実行された回数                                                   |
| `fatal_count`            | 致命的なエラーで終了したデータベースセッション数                                                                                 |
| `index_hit_ratio`        | キャッシュ内のインデックス率<br/>(sum(`idx_blks_hit`) - sum(`idx_blks_read`)) / sum(`idx_blks_hit`) \* 100             |
| `lock_wait_sessions`     | 現在、rowlockを取得する待機中の数                                                                                     |
| `long_running_sessions`  | 現在、データベースで無期限に実行されているクエリの数                                                                               |
| `max_connections`        | 最大同時クライアント接続とコネクション数を超過した場合、**Too ManyConnection Error**が発生する可能性があります。                                   |
| `numbackends`            | そのデータベースに接続されているバックエンド数、または共有オブジェクトの場合は、`nULL`                                                           |
| `rollback_count`         | そのデータベースからロールバックされたトランザクションの数                                                                            |
| `table_hit_ratio`        | テーブルのblks hit(キャッシュヒット)と blks read(ディスク読み込み回数)の比率                                                        |
| `temp_bytes`             | 該当データベースのクエリによる一時ファイルに書き込まれた総データ量                                                                        |
| `temp_files`             | そのデータベースのクエリによって生成された一時ファイル数                                                                             |
| `total_runtime`          | クエリを実行しているセッションの実行時間の合計                                                                                  |
| `total_sessions`         | すべてのセッション数                                                                                               |
| `tup_deleted`            | そのデータベースからクエリによって削除された行数                                                                                 |
| `tup_fetched`            | そのデータベースからクエリが取得した行数                                                                                     |
| `tup_inserted`           | そのデータベースからクエリによって挿入された行数                                                                                 |
| `tup_returned`           | そのデータベースからクエリから返された行数                                                                                    |
| `tup_updated`            | そのデータベースからクエリによってアップデートされた行数                                                                             |
| `uptime`                 | サーバーが起動してから経過した時間                                                                                        |
| `vacuum_running_count`   | 実行中のvacuum機能の数                                                                                           |
| `wait_sessions`          | 保留中のセッション数                                                                                               |
| `warning_count`          | 合計エラーおよびアラート、参考数                                                                                         |
| `cpu(xos)`               | XOSエージェントで収集するOSメトリクス                                                                                    |
| `cpu_idle(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                    |
| `cpu_iowait(xos)`        | XOSエージェントで収集するOSメトリクス                                                                                    |
| `cpu_sys(xos)`           | XOSエージェントで収集するOSメトリクス                                                                                    |
| `cpu_user(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem(xos)`               | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_available(xos)`     | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_buffcache(xos)`     | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_free(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_swapfree(xos)`      | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_swaptotal(xos)`     | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_total(xos)`         | XOSエージェントで収集するOSメトリクス                                                                                    |
| `mem_used(xos)`          | XOSエージェントで収集するOSメトリクス                                                                                    |
| `net_recv_bytes(xos)`    | XOSエージェントで収集するOSメトリクス                                                                                    |
| `net_recv_packets(xos)`  | XOSエージェントで収集するOSメトリクス                                                                                    |
| `net_send_bytes(xos)`    | XOSエージェントで収集するOSメトリクス                                                                                    |
| `net_send_packets(xos)`  | XOSエージェントで収集するOSメトリクス                                                                                    |

</div>
